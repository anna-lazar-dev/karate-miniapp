<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Karate Trainer</title>

  <link rel="stylesheet" href="./style.css" />

  <!-- Telegram WebApp SDK (–±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –≤—Å–µ–≥–¥–∞) -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

<div class="app">

  <!-- HEADER -->
  <header class="top">
    <div class="title">
      <h1>Karate Trainer</h1>
      <p class="subtitle">–¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è ‚Ä¢ –º–∏–Ω–∏-–∫–≤–∏–∑</p>
    </div>

    <div class="top-actions">
      <div class="tg-badge" id="tgBadge" hidden>
        <span id="tgUser"></span>
      </div>

      <button id="themeToggle" class="icon-btn" type="button" aria-label="Toggle theme">üåô</button>
    </div>
  </header>

  <!-- MENU -->
  <section class="card" id="menuCard">
    <div class="row">
      <label class="label">–†–µ–∂–∏–º</label>
      <div class="segmented">
        <button id="modeJpRu" class="seg active" type="button">JP ‚Üí RU</button>
        <button id="modeRuJp" class="seg" type="button">RU ‚Üí JP</button>
      </div>
    </div>

    <div class="row">
      <label class="label" for="topicSelect">–¢–µ–º–∞</label>
      <select id="topicSelect"></select>
    </div>

    <div class="row">
      <label class="label" for="countSelect">–í–æ–ø—Ä–æ—Å–æ–≤</label>
      <select id="countSelect">
        <option value="5">5</option>
        <option value="10" selected>10</option>
        <option value="15">15</option>
        <option value="20">20</option>
      </select>
    </div>

    <button id="startBtn" class="btn primary" type="button">–ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>

<div class="menu-actions">
  <button id="dictionaryBtn" class="btn info" type="button">–û—Ç–∫—Ä—ã—Ç—å —Å–ª–æ–≤–∞—Ä—å</button>
  <button id="dojokunBtn" class="btn dojo" type="button">–î–æ–¥–∑—ë-–∫—É–Ω</button>
</div>

    <p class="hint">–†–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –≤–Ω—É—Ç—Ä–∏ Telegram.</p>
  </section>

  <!-- QUIZ -->
  <section class="card" id="quizCard" hidden>
    <div class="quiz-head">
      <div>
        <span id="qIndex">1</span>/<span id="qTotal">10</span>
      </div>
      <div>
        –û—á–∫–∏: <span id="score">0</span>
      </div>
    </div>

    <div class="question">
      <div class="q-label">–í–æ–ø—Ä–æ—Å:</div>
      <div id="prompt" class="prompt">...</div>
    </div>

    <div id="answers" class="answers"></div>

    <div class="quiz-actions">
      <button id="quitBtn" class="ghost" type="button">–í—ã–π—Ç–∏</button>
    </div>
  </section>

  <!-- RESULT -->
  <section class="card" id="resultCard" hidden>
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>

    <p>
      –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö:
      <b><span id="finalCorrect">0</span></b>
      –∏–∑
      <b><span id="finalTotal">10</span></b>
    </p>

    <div id="mistakesBox" class="mistakes" hidden>
      <h3>–û—à–∏–±–∫–∏</h3>
      <ul id="mistakesList"></ul>
    </div>

    <div class="row row-gap">
      <button id="retryBtn" class="primary" type="button">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
      <button id="backBtn" class="ghost" type="button">–í –º–µ–Ω—é</button>
    </div>
  </section>

  <!-- DICTIONARY -->
  <section class="card" id="dictionaryCard" hidden>
    <div class="dict-head">
      <h2>–°–ª–æ–≤–∞—Ä—å</h2>
      <button id="closeDictionaryBtn" class="icon-btn" type="button">‚úï</button>
    </div>

    <div class="row">
      <label class="label" for="dictTopicSelect">–¢–µ–º–∞</label>
      <select id="dictTopicSelect"></select>
    </div>

    <input id="searchInput" type="text" placeholder="–ü–æ–∏—Å–∫: rei, mae-geri, –±–ª–æ–∫..." />

    <div id="dictionaryList" class="dictionary"></div>

    <button id="closeDictionaryBtn2" class="ghost" type="button">–ù–∞–∑–∞–¥</button>
  </section>

  <!-- DOJOKUN -->
<section class="card" id="dojokunCard" hidden>
  <div class="dict-head">
    <h2 id="dojokunTitle">–î–æ–¥–∑—ë-–∫—É–Ω</h2>
    <button id="closeDojokunBtn" class="icon-btn" type="button">‚úï</button>
  </div>

  <ol id="dojokunList" class="dojokun-list"></ol>

  <div id="dojokunFooter" class="dojokun-footer"></div>

  <button id="closeDojokunBtn2" class="ghost" type="button">–ù–∞–∑–∞–¥</button>
</section>


  <footer class="footer">
    <small>v0.1 ‚Ä¢ MVP</small>
  </footer>

</div>

<script type="module" src="./app.js"></script>

</body>
</html>
